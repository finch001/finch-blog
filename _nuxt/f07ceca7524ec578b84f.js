(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{216:function(e,n){const o={render:function(){var e=this,n=e.$createElement,o=e._self._c||n;return o("div",{staticClass:"dynamicMarkdown"},[o("h2",[e._v("Qué es Vuex")]),e._v(" "),e._m(0),e._v(" "),o("h2",[e._v("Qué problema resuelve")]),e._v(" "),o("p",[e._v("Cuando trabajas con una librería como Vue, la información de los componentes se transporta de componente padre a componente hijo a través de “props” y viceversa a través de emitir un evento que escuchará el padre. Hay algunas veces que necesitas acceder a información de un componente desde otro sin que tengan la relación de padre e hijo. ¿Cómo la vas a obtener entonces? Técnicamente se puede hacer, pero además de ser una movida acabas con lógica de negocio repartida por cualquier componente que seguramente se repita y que en aplicaciones grandes puede ser un drama. Aquí es donde entra la centralización de esa información con herramientras como Vuex (en Vue) o Redux (en React). No solo puedes centralizar información sino también funciones.")]),e._v(" "),o("h2",[e._v("La estructura para utilizar Vuex")]),e._v(" "),o("p",[e._v("Vuex se distribuye de la siguiente manera:")]),e._v(" "),e._m(1),e._v(" "),o("h2",[e._v("Cómo y por qué yo lo utilicé mal")]),e._v(" "),e._m(2),e._v(" "),o("p",[e._v("Pero yo como era una novata, pensé que esta idea de centralización de información me vendría de lujo para crear esta web con blog que expliqué en este "),o("nuxt-link",{attrs:{to:"/es/blog/blog-usando-vue-nuxt-markdown"}},[e._v("post")]),e._v(". En un primer paso pensé en importar todos los archivos markdown en mi webapp de una sola vez a través de una acción que comitearía una mutación para terminar guardando todos los posts en el estado. Así, después tendría acceso desde el estado a todos los posts o a uno solo, según necesitara en cada componente. Por ejemplo, en la página dinámica de cada post simplemente haría algo así y obtendría el post que busco:")],1),e._v(" "),e._m(3),e._v(" "),o("p",[e._v("No utilizo módulos de Vuex en el ejemplo porque así se entiende mejor. Simplemente estamos llamando al estado que lo tenemos configurado como un array con los idiomas de la página, (en este caso queremos que solo nos saque los del idioma actual) y el tipo de información que queremos (en este caso queremos blogs).\nDevolvemos un objeto que será el objeto de la URL del post que coincida con el array blogs.")]),e._v(" "),o("p",[e._v("En teoría el estado lo reutilizaría muchas veces, por ejemplo, para sacar todos los posts en la página home de la web.")]),e._v(" "),o("p",[e._v("Así lo hice, tenía sentido hasta aquí o eso creía. PERO NO. Estaba muy equivocada. PENSÉMOSLO MEJOR.")]),e._v(" "),o("p",[e._v("El principal problema de cómo había planteado Vuex era la ESCALABILIDAD. No es que sea un problema de Vuex, sino de cómo yo lo había construido al no tener en cuenta cómo funciona.")]),e._v(" "),o("p",[e._v("Había planteado una importación de todos los markdown en Vuex donde los guardaba y gestionaba desde allí. Al guardarlos en Vuex, se ejecutaban en la primera carga en el JS inicial todos los posts y cuantos más posts tuviera más grande sería y más tardaría en cargar la web. Eso sí, una vez pasaba la primera carga, la web volaba de rápido… pero no tenía ningún sentido a nivel de escalabilidad.")]),e._v(" "),e._m(4),e._v(" "),o("p",[e._v("Este error, como tantos que me he ido encontrando en este proyecto sola, me sirvió para aprender bastante de Vuex y de cuando utilizarlo y cuando no, con eso me quedo.")]),e._v(" "),o("p",[e._v("Por suerte me dí cuenta de mi error antes de publicar la web y pude cambiar el sistema de importación. Escribí un post sobre cómo hice esta importación dinámica "),o("nuxt-link",{attrs:{to:"/es/blog/blog-usando-vue-nuxt-markdown"}},[e._v(" aquí")]),e._v(".")],1),e._v(" "),e._m(5)])},staticRenderFns:[function(){var e=this.$createElement,n=this._self._c||e;return n("p",[this._v("Abreviadamente, "),n("a",{attrs:{href:"https://vuex.vuejs.org/"}},[this._v("Vuex")]),this._v(" te permite centralizar información y funciones de la app que son accesibles a través de cualquier componente.")])},function(){var e=this,n=e.$createElement,o=e._self._c||n;return o("ul",[o("li",[o("strong",[e._v("Estado")]),e._v(" (en el código "),o("code",{pre:!0},[e._v("state")]),e._v("):\n"),o("ul",[o("li",[e._v("Es un objeto que puede contener cualquier tipo de información: strings, arrays u otros objetos.")]),e._v(" "),o("li",[e._v("Es la información que almacenamos de forma centralizada en toda la app.")])])]),e._v(" "),o("li",[o("strong",[e._v("Mutaciones")]),e._v(" (en el código "),o("code",{pre:!0},[e._v("mutations")]),e._v("):\n"),o("ul",[o("li",[e._v("Son funciones.")]),e._v(" "),o("li",[e._v("Son las únicas funciones que pueden modificar el estado.")]),e._v(" "),o("li",[e._v("Son llamadas por las acciones.")]),e._v(" "),o("li",[e._v("Se pueden inicializar en el componente a utilizar a través de commit o inicializarse a través de una acción.")]),e._v(" "),o("li",[e._v("Son síncronas.")])])]),e._v(" "),o("li",[o("strong",[e._v("Acciones")]),e._v(" (en el código "),o("code",{pre:!0},[e._v("actions")]),e._v("):\n"),o("ul",[o("li",[e._v("Son funciones.")]),e._v(" "),o("li",[e._v("Poseen la lógica de negocio.")]),e._v(" "),o("li",[e._v("Para cambiar el estado deben de llamar a mutaciones a través de "),o("em",[e._v("commit")]),e._v(".")]),e._v(" "),o("li",[e._v("Pueden llamar otras acciones a través de "),o("em",[e._v("dispatch")]),e._v(".")]),e._v(" "),o("li",[e._v("La forma de inicializarse en el componente es a través de "),o("em",[e._v("dispatch")]),e._v(" o utilizando modulos.")]),e._v(" "),o("li",[e._v("Son asíncronas.")])])]),e._v(" "),o("li",[o("strong",[e._v("Getters")]),e._v(" (en el código "),o("code",{pre:!0},[e._v("getters")]),e._v(").\n"),o("ul",[o("li",[e._v("Son funciones.")]),e._v(" "),o("li",[e._v("No cambian el estado pero sí que lo formatean para que podemos utilizar esa información de la manera que la necesitemos.")]),e._v(" "),o("li",[e._v("Sería lo más parecido a una propiedad "),o("em",[e._v("computed")]),e._v(" en el componente.")]),e._v(" "),o("li",[e._v("Un ejemplo sería una función que filtrara el estado. No lo modifica pero te devuelve un nuevo objeto diferente con los datos filtrados que necesitas.")])])])])},function(){var e=this.$createElement,n=this._self._c||e;return n("p",[n("strong",[this._v("¡El hecho de que exista Vuex no quiere decir que todas las aplicaciones lo necesiten! Para nada.")]),this._v(" Recordemos que Vuex tiene sentido si se reutiliza el código o si hay si hay componentes distantes que necesiten comunicarse. No tiene sentido que hagas un getter si solo lo vas a utilizar una vez y no se comunica con otro componente, para eso crea una propiedad computed en el mismo componente que lo necesita.")])},function(){var e=this,n=e.$createElement,o=e._self._c||n;return o("pre",{staticClass:"language-javascript"},[o("code",{staticClass:"language-javascript"},[o("span",{staticClass:"token function"},[e._v("data")]),e._v(" "),o("span",{staticClass:"token punctuation"},[e._v("(")]),o("span",{staticClass:"token punctuation"},[e._v(")")]),e._v(" "),o("span",{staticClass:"token punctuation"},[e._v("{")]),e._v("\n  "),o("span",{staticClass:"token keyword"},[e._v("const")]),e._v(" blogs "),o("span",{staticClass:"token operator"},[e._v("=")]),e._v(" "),o("span",{staticClass:"token keyword"},[e._v("this")]),o("span",{staticClass:"token punctuation"},[e._v(".")]),e._v("$store"),o("span",{staticClass:"token punctuation"},[e._v(".")]),e._v("state"),o("span",{staticClass:"token punctuation"},[e._v("[")]),o("span",{staticClass:"token keyword"},[e._v("this")]),o("span",{staticClass:"token punctuation"},[e._v(".")]),e._v("$i18n"),o("span",{staticClass:"token punctuation"},[e._v(".")]),e._v("locale"),o("span",{staticClass:"token punctuation"},[e._v("]")]),o("span",{staticClass:"token punctuation"},[e._v(".")]),e._v("blogs\n  "),o("span",{staticClass:"token keyword"},[e._v("return")]),e._v(" "),o("span",{staticClass:"token punctuation"},[e._v("{")]),e._v("\n    blog"),o("span",{staticClass:"token punctuation"},[e._v(":")]),e._v(" blogs"),o("span",{staticClass:"token punctuation"},[e._v("[")]),e._v("params"),o("span",{staticClass:"token punctuation"},[e._v(".")]),e._v("slug"),o("span",{staticClass:"token punctuation"},[e._v("]")]),e._v("\n  "),o("span",{staticClass:"token punctuation"},[e._v("}")]),e._v("\n"),o("span",{staticClass:"token punctuation"},[e._v("}")]),e._v("\n")])])},function(){var e=this.$createElement,n=this._self._c||e;return n("p",[n("strong",[this._v("Te voy a explicar mi gran error con Vuex en un ejemplo no técnico:")]),this._v(" Pensando que no caduca la leche, es como si en vez de comprar una caja de leche en el supermercado cuando la necesitaras, compraras la primera vez todas las cajas de leche que vas a consumir en tu vida y las guardaras en casa. El coste inicial sería tremendo y no tiene sentido guardar cosas que no vas a utilizar en ese momento, eso sí, no tendrías que volver a ir al supermercado.")])},function(){var e=this.$createElement,n=this._self._c||e;return n("p",[this._v("Como no tengo comentarios en el blog, me encantaría continuar la conversación en "),n("a",{attrs:{href:"https://twitter.com/MarinaAisa"}},[this._v("Twitter")]),this._v(". ¡Todo feedback es bienvenido! Si crees que hay algo que se puede mejorar me ayudarías muchísimo.")])}]};e.exports={attributes:{name:"vuex-que-es-cuando-utilizarlo",title:"Cómo funciona Vuex y cómo lo utilicé mal",year:"23 Enero 2019",color:"#edece7",isTextColorDark:!0,trans:"vuex-what-is-when-use-it",id:"vuex-what-when",description:"Conceptos básicos de Vuex, cómo empeoré la performance de mi web con ello y por qué.\n"},vue:{render:o.render,staticRenderFns:o.staticRenderFns,component:{data:function(){return{templateRender:null}},render:function(e){return this.templateRender?this.templateRender():e("div","Rendering")},created:function(){this.templateRender=o.render,this.$options.staticRenderFns=o.staticRenderFns}}}}}}]);